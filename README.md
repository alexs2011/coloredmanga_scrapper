# ColoredMangaScrapper

## 1. Описание

ColoredMangaScrapper - это консольное приложение, позволяющее загружать мангу с
сайта [coloredmanga.com](https://coloredmanga.com/), на котором расположены манги с улучшенным (увеличенным) при помощи
нейросетей разрешением страниц. Приложение создано для помощи пользователю в скачивании контента в ситуациях, когда к
нему необходим офлайн доступ.

---

## 2. Принцип работы программы

Манга (изданная на бумаге) может быть представлена следующей иерархией сущностей: манга - том - глава - страница. Манга,
расположенная на сайте, сохраняет, как правило, этот принцип, при этом информация о томах и главах располагается на
главной странице манги, а информация о страницах, представляющих собой изображения, — на странице той главы, к которой
они относятся. Однако в некоторых случаях манга на сайте не имеет томов, и представляет собой список глав.

### 2.1. Версии программы

В репозитории расположены две версии приложения:

1) [coloredmanga_scrapper_sync](https://github.com/alexs2011/coloredmanga_scrapper/tree/master/coloredmanga_scrapper_sync)
   загружает данные последовательно
2) [coloredmanga_scrapper_async](https://github.com/alexs2011/coloredmanga_scrapper/tree/master/coloredmanga_scrapper_async)
   производит асинхронную загрузку файлов

Асинхронная версия позволяет значительно уменьшить время, необходимое программе для скачивания манги, но в остальном с
точки зрения пользователя обе версии идентичны.

### 2.2. Принцип работы

Программа получает html представление главной страницы манги при помощи модуля `requests` и, используя `lxml`, извлекает
необходимую информацию, а именно название манги, названия томов (при наличии) и названия глав и ссылки на них. После,
при помощи вышеназванных модулей, получается html представление для каждой главы и из них извлекаются страницы (
изображения).

При этом:

- в последовательной версии обработка глав происходит по одной за раз (сначала обрабатывается глава 1, потом глава 2 и
  т.д.);
- в асинхронной версии одновременно обрабатываются сразу множество глав.

Если у манги на сайте нет томов, то создаётся том с именем "No Volumes", куда складываются все главы.

Полученная структура манги конвертируется в формат JSON и сохраняется в файл, из которого впоследствии может быть
прочитана.

На следующем этапе происходит загрузка страниц манги на основании структуры в соответствии с заданными параметрами
(см. [Возможности](#3-Возможности)). При этом:

- в последовательной версии поочерёдно проходятся все тома и главы и при этом, если они удовлетворяют заданным
  параметрам, происходит загрузка их страниц;
- в асинхронной версии вначале поочерёдно проходятся все тома и главы и создаётся список всех страниц, которые
  необходимо загрузить, а после в асинхронном режиме происходит их загрузка.

---

## 3. Возможности

---

## 4. Пример запуска
